# 測試計劃

本文件提供完整的功能測試檢查清單，確保工具品質。

---

## 測試環境

### 瀏覽器測試矩陣

| 瀏覽器  | 版本 | 作業系統  | 狀態     |
| ------- | ---- | --------- | -------- |
| Chrome  | 120+ | Windows   | ✅ 必測   |
| Edge    | 120+ | Windows   | ✅ 必測   |
| Firefox | 115+ | Windows   | ⚠️ 建議測 |
| Safari  | 14+  | macOS/iOS | ⚠️ 建議測 |

### 裝置測試清單

- [ ] **桌面電腦**（1920×1080）
- [ ] **筆記型電腦**（1366×768）
- [ ] **平板電腦**（iPad、Android Tablet）
- [ ] **智慧型手機**（iPhone、Android Phone）

---

## 功能測試清單

### 1. 前置作業頁面

#### 1.1 UI 顯示
- [ ] 頁面標題正確顯示
- [ ] 所有選項按鈕正常渲染
- [ ] 日期選擇器預設今天日期
- [ ] 聲音開關按鈕顯示
- [ ] 「開始統計」按鈕可見

#### 1.2 日期功能
- [ ] 可選擇任意日期
- [ ] 預設值為當天
- [ ] 日期格式正確（YYYY-MM-DD）

#### 1.3 選項按鈕
- [ ] 點擊後有視覺回饋（藍色邊框）
- [ ] 只能單選
- [ ] 重複點擊同一選項保持選中
- [ ] 語音播報選項名稱

#### 1.4 班別主題切換
- [ ] 選擇「早班」→ 白色背景
- [ ] 選擇「晚班」→ 深色背景
- [ ] 選擇「其他」→ 藍色背景
- [ ] 主題切換流暢無閃爍

#### 1.5 鍵盤導航（前置頁面）
- [ ] W 鍵向上移動焦點
- [ ] S 鍵向下移動焦點
- [ ] A 鍵向左移動焦點
- [ ] D 鍵向右移動焦點
- [ ] 空白鍵選取當前項目
- [ ] Enter 鍵進入主程式
- [ ] 焦點有明顯視覺標示（黃色外框）

#### 1.6 地點選擇
- [ ] 地點按區域分組
- [ ] 台北市 12 區完整
- [ ] 新北市 29 區完整
- [ ] 桃園市 13 區完整
- [ ] 基隆市 7 區完整
- [ ] 可選擇「外縣市(其他區)」

#### 1.7 進入主程式
- [ ] 點擊「開始統計」進入主程式
- [ ] Enter 鍵可觸發
- [ ] 有音效（上升音階）
- [ ] 頁面切換動畫流暢
- [ ] 前置資料正確傳遞

---

### 2. 主程式頁面

#### 2.1 頂部資訊列
- [ ] 顯示業主和地點
- [ ] 顯示日期、人員、狀態
- [ ] 總計面積即時更新
- [ ] 返回按鈕可用

#### 2.2 標線類型列表
- [ ] 80+ 種類型全部顯示
- [ ] 依 A-H 分類正確
- [ ] 每個類型顯示公式預覽
- [ ] 類型卡片顏色正確
- [ ] 選中類型有藍色邊框與指示點
- [ ] 可滾動查看所有類型

#### 2.3 數字鍵盤
- [ ] 0-9 按鈕正常
- [ ] 小數點按鈕正常
- [ ] DEL 刪除最後一位
- [ ] AC 清空所有輸入
- [ ] 確認按鈕正常
- [ ] 按鈕有按壓動畫

#### 2.4 輸入顯示畫面
- [ ] 顯示當前選擇的標線名稱
- [ ] 顯示輸入數值
- [ ] 顯示正確單位（m/點/條/個）
- [ ] 即時計算預覽公式
- [ ] 「修改」按鈕可用

#### 2.5 計算正確性

**線性計算（linear）：**
- [ ] 白線：10m × 0.1 = 1.0m² ✅
- [ ] 停止線：5m × 0.4 = 2.0m² ✅
- [ ] 雙黃線：10m × 0.1 × 2.0 = 2.0m² ✅

**數量計算（count）：**
- [ ] 1m行穿線：8條 × 1 × 0.4 = 3.2m² ✅
- [ ] 指標箭頭：5個 × 1 = 5.0m² ✅
- [ ] 白點線：10點 × 4.0 × 0.1 = 4.0m² ✅

**計次統計（item）：**
- [ ] 黃貓眼：15個，面積 = 0 ✅
- [ ] 防撞桿：8支，面積 = 0 ✅

#### 2.6 統計列表
- [ ] 新增項目出現在頂部
- [ ] 顯示標線名稱
- [ ] 顯示輸入值與係數
- [ ] 顯示計算面積
- [ ] 刪除按鈕正常
- [ ] 可滾動查看所有項目

#### 2.7 總計顯示
- [ ] 總計即時更新
- [ ] 計算正確
- [ ] 格式化為 2 位小數
- [ ] 顯示單位 m²

#### 2.8 鍵盤操作（主程式）
- [ ] W/S/A/D 在標線類型間移動
- [ ] 空白鍵選擇標線類型
- [ ] 0-9 直接輸入數字
- [ ] . 輸入小數點
- [ ] Backspace 刪除
- [ ] Escape 清空
- [ ] Enter 確認輸入
- [ ] P 鍵複製報表

---

### 3. 自訂項目功能

#### 3.1 開啟 Modal
- [ ] 點擊「新增自訂項目」開啟
- [ ] Modal 居中顯示
- [ ] 背景半透明遮罩

#### 3.2 輸入欄位
- [ ] 項目名稱欄位可輸入
- [ ] 計算方式下拉選單正常
- [ ] 係數欄位可輸入
- [ ] 預覽公式即時更新

#### 3.3 計算方式
- [ ] 「長度(m)」模式正常
- [ ] 「數量(個/點/條)」模式正常
- [ ] 「計次(無面積)」模式正常

#### 3.4 係數輸入
- [ ] 支援單一數字（如 0.1）
- [ ] 支援算式（如 1.0*0.5）
- [ ] 支援多項乘法（如 0.1*2*3）
- [ ] 錯誤輸入提示

#### 3.5 新增功能
- [ ] 新增成功後項目出現在 G 區或 H 區
- [ ] 自訂項目儲存到 localStorage
- [ ] 重新整理後仍存在
- [ ] 可以選擇並使用自訂項目

---

### 4. 報表功能

#### 4.1 報表內容
- [ ] 包含完整前置資料
- [ ] 標線項目正確分組
- [ ] 相同標線項目合併計算
- [ ] 顯示詳細計算過程
- [ ] 總計計算正確
- [ ] 非標線項目獨立列出

#### 4.2 報表格式
- [ ] 標題正確
- [ ] 分隔線整齊
- [ ] 換行正確
- [ ] 特殊符號顯示正常

#### 4.3 複製功能
- [ ] 點擊按鈕可複製
- [ ] P 鍵可複製
- [ ] 顯示「複製成功」提示
- [ ] 提示 2 秒後自動消失
- [ ] 播放勝利音效

#### 4.4 貼上測試
- [ ] Line 貼上格式正確
- [ ] Excel 貼上格式正確
- [ ] 記事本貼上格式正確
- [ ] Word 貼上格式正確

---

### 5. 音效與語音

#### 5.1 音效測試
- [ ] 點擊音效（叮咚聲）
- [ ] 頁面切換音（上升音階）
- [ ] 返回音效（下降音階）
- [ ] 複製成功音（勝利音效）
- [ ] 音量適中

#### 5.2 語音測試
- [ ] 選擇人員時播報
- [ ] 選擇地點時播報
- [ ] 選擇標線類型時播報
- [ ] 中文發音正確
- [ ] 語速適中（rate: 1.2）

#### 5.3 聲音開關
- [ ] 點擊可切換
- [ ] 關閉後無音效
- [ ] 關閉後無語音
- [ ] 圖示正確變化
- [ ] 兩個頁面同步

---

### 6. 資料持久化

#### 6.1 LocalStorage
- [ ] 自訂項目儲存正常
- [ ] 修改的係數儲存正常
- [ ] 重新整理後資料仍存在
- [ ] 清除瀏覽器資料後重置

#### 6.2 資料管理
- [ ] 「恢復預設」功能正常
- [ ] 「清空」功能正常
- [ ] 確認對話框正常

---

### 7. 響應式設計

#### 7.1 桌面版（≥1024px）
- [ ] 左右分欄顯示
- [ ] 標線類型 6 列網格
- [ ] 所有功能可見
- [ ] 無水平滾動條

#### 7.2 平板版（768px-1023px）
- [ ] 版面調整正常
- [ ] 標線類型 4-5 列網格
- [ ] 觸控操作友善

#### 7.3 手機版（<768px）
- [ ] 上下堆疊布局
- [ ] 標線類型 3 列網格
- [ ] 統計列表高度適中
- [ ] 按鈕大小足夠（≥44px）
- [ ] 單手操作友善

---

### 8. 錯誤處理

#### 8.1 輸入驗證
- [ ] 負數無法輸入
- [ ] 零無法確認
- [ ] 非數字輸入防呆
- [ ] 過長數字限制（8位）

#### 8.2 邊界條件
- [ ] 小數點只能輸入一次
- [ ] 空值無法確認
- [ ] 未選擇類型無法確認

#### 8.3 錯誤提示
- [ ] 適當的錯誤提示（如有）
- [ ] Console 無嚴重錯誤

---

### 9. 效能測試

#### 9.1 載入效能
- [ ] 頁面載入 < 2 秒
- [ ] 首次渲染 < 1 秒
- [ ] CDN 資源載入正常

#### 9.2 操作效能
- [ ] 按鍵回應 < 100ms
- [ ] 類型切換流暢
- [ ] 列表滾動流暢
- [ ] 100 筆資料無卡頓

#### 9.3 記憶體
- [ ] 長時間使用無記憶體洩漏
- [ ] 500 筆歷史記錄正常

---

### 10. 安全性測試

#### 10.1 XSS 防護
- [ ] 輸入特殊字符不執行
- [ ] HTML 標籤被轉義
- [ ] Script 標籤無效

#### 10.2 資料安全
- [ ] 資料僅本地儲存
- [ ] 無外部請求（除 CDN）
- [ ] 無隱私資料洩漏

---

## 迴歸測試清單

每次更新後必須執行：

- [ ] 基本輸入流程正常
- [ ] 報表複製功能正常
- [ ] 鍵盤導航正常
- [ ] 自訂項目正常
- [ ] localStorage 正常
- [ ] 無 Console 錯誤

---

## Bug 回報格式

```markdown
**環境**
- 瀏覽器：Chrome 120
- 作業系統：Windows 11
- 裝置：桌面電腦

**重現步驟**
1. 開啟工具
2. 選擇「白線」
3. 輸入 10.5
4. 點擊確認

**預期結果**
計算為 1.05m²

**實際結果**
顯示 NaN

**截圖**
[附上截圖]

**Console 錯誤**
```
Uncaught TypeError: ...
```
```

---

## 測試報告範本

```markdown
# 測試報告 - v1.0.0

**測試日期**：2026-01-12  
**測試人員**：XXX  
**測試環境**：Chrome 120 / Windows 11

## 測試結果摘要
- **通過**：95/100
- **失敗**：3/100
- **跳過**：2/100

## 失敗項目
1. Safari 語音合成不支援中文 ⚠️
2. ...

## 建議
1. ...
2. ...
```

---

**完成所有測試後，工具即可部署給團隊使用！** ✅
